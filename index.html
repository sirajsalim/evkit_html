<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVKit - The Complete EV Cost Calculator</title>
    <meta name="description" content="Calculate real-world EV costs, compare vehicles, predict battery degradation. Coming March 2026. Just £2.99, no subscriptions.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://evkit.app/">
    <meta property="og:title" content="EVKit - The Complete EV Cost Calculator">
    <meta property="og:description" content="Calculate real-world EV costs, compare vehicles, predict battery degradation. Coming March 2026. Just £2.99, no subscriptions.">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://evkit.app/">
    <meta name="twitter:title" content="EVKit - The Complete EV Cost Calculator">
    <meta name="twitter:description" content="Calculate real-world EV costs, compare vehicles, predict battery degradation. Coming March 2026. Just £2.99, no subscriptions.">

    <!-- Additional Meta -->
    <meta name="theme-color" content="#62D2A2">
    <link rel="canonical" href="https://evkit.app/">

    <link rel="stylesheet" href="style.css?v=42">

    <!-- GSAP for premium scroll animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js" defer></script>
</head>
<body>
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Navigation Header -->
    <header>
        <nav class="nav-container">
            <a href="index.html" class="nav-logo">EVKit</a>
            <button class="nav-hamburger" aria-label="Toggle menu" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-links">
                <a href="#compare">Compare</a>
                <a href="#battery">Battery</a>
                <a href="#watch">Watch</a>
                <a href="#get-started" class="nav-cta">Get Started</a>
            </div>
        </nav>
    </header>

    <main id="main-content">
        <!-- Section 1: Hero -->
        <section class="section section-hero" id="hero">
            <!-- Charging Cable SVG - Natural coiled cable lying in hero -->
            <svg class="hero-cable" viewBox="0 0 1200 800" preserveAspectRatio="xMidYMid slice" aria-hidden="true">
                <defs>
                    <linearGradient id="cableGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="#1e1e1e"/>
                        <stop offset="50%" stop-color="#282828"/>
                        <stop offset="100%" stop-color="#1e1e1e"/>
                    </linearGradient>
                </defs>

                <!-- Shadow (simple offset, no filter) -->
                <path d="M-30,780 C80,740 140,650 130,560 C120,470 180,400 260,420 C340,440 330,530 400,540 C470,550 520,480 540,420 C560,360 650,340 740,360 C830,380 860,440 940,410 C1020,380 1100,360 1200,380"
                      stroke="#000" stroke-width="7" fill="none" stroke-linecap="round" opacity="0.12" transform="translate(1,3)"/>

                <!-- Main cable body -->
                <path class="cable-base"
                      d="M-30,780 C80,740 140,650 130,560 C120,470 180,400 260,420 C340,440 330,530 400,540 C470,550 520,480 540,420 C560,360 650,340 740,360 C830,380 860,440 940,410 C1020,380 1100,360 1200,380"
                      stroke="url(#cableGradient)" stroke-width="5" fill="none" stroke-linecap="round"/>

                <!-- Current flow (thin bright line on top) -->
                <path class="cable-current"
                      d="M-30,780 C80,740 140,650 130,560 C120,470 180,400 260,420 C340,440 330,530 400,540 C470,550 520,480 540,420 C560,360 650,340 740,360 C830,380 860,440 940,410 C1020,380 1100,360 1200,380"
                      stroke="#62D2A2" stroke-width="2" fill="none" stroke-linecap="round" opacity="0.7"/>

                <!-- Plug at end -->
                <g transform="translate(1192, 378)">
                    <rect x="0" y="-7" width="22" height="14" rx="3" fill="#252525" stroke="#3a3a3a" stroke-width="0.5"/>
                    <rect x="19" y="-4" width="8" height="8" rx="1.5" fill="#1a1a1a"/>
                    <circle cx="30" cy="0" r="2" fill="#62D2A2" class="plug-indicator"/>
                </g>
            </svg>

            <div class="container">
                <div class="hero-content">
                    <div class="hero-badges">
                        <span class="hero-badge">iPhone</span>
                        <span class="hero-badge-separator">+</span>
                        <span class="hero-badge">Apple Watch</span>
                    </div>
                    <h1 class="hero-headline">
                        <span class="headline-primary">The <span class="highlight">EV</span> Cost Calculator</span>
                        <span class="headline-secondary">That Gets It Right</span>
                    </h1>
                    <p class="hero-subheadline">
                        Real calculations. Real data. Not guesses.
                    </p>
                    <p class="hero-tagline">Coming March 2026 · £2.99 · No subscriptions</p>
                    <button class="cta-button" id="registerButton">Get Early Access</button>
                </div>
                <div class="hero-devices">
                    <!-- iPhone Mockup -->
                    <div class="device-iphone">
                        <div class="iphone-notch"></div>
                        <div class="iphone-screen">
                            <img src="assets/hero-vehicle.png" alt="EVKit showing Tesla Model Y with journey costs for Home, Work and Public charging" class="screen-screenshot">
                        </div>
                    </div>
                    <!-- Apple Watch Mockup -->
                    <div class="device-watch">
                        <div class="watch-crown"></div>
                        <div class="watch-button"></div>
                        <div class="watch-screen">
                            <div class="screen-placeholder screen-placeholder-watch">
                                <span class="placeholder-icon-small">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                                    </svg>
                                </span>
                                <span class="placeholder-text-small">£0.12/mi</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="scroll-indicator" aria-hidden="true">
                <span>Scroll to explore</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M19 12l-7 7-7-7"/>
                </svg>
            </div>
        </section>

        <!-- Section 2: Calculate -->
        <section class="section section-calculate" id="calculate">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Know Before You Go</h2>
                    <p class="section-subtitle">Enter a distance. See exactly what it costs.</p>
                </div>

                <div class="calculate-showcase">
                    <div class="calculate-main">
                        <!-- Mode tabs -->
                        <div class="calculate-tabs">
                            <button class="calculate-tab active" data-mode="manual">Manual Calc</button>
                            <button class="calculate-tab" data-mode="vehicle">Selected Vehicle</button>
                        </div>

                        <div class="device-iphone calculate-phone">
                            <div class="iphone-notch"></div>
                            <div class="iphone-screen">
                                <img src="assets/calculate-manual.png"
                                     data-manual="assets/calculate-manual.png"
                                     data-vehicle="assets/calculate-vehicle.png"
                                     alt="EVKit journey cost calculator"
                                     class="screen-screenshot calculate-screenshot">
                            </div>
                        </div>
                    </div>

                    <div class="calculate-features">
                        <div class="feature-item">
                            <span class="feature-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
                                    <polyline points="9 22 9 12 15 12 15 22"/>
                                </svg>
                            </span>
                            <div class="feature-text">
                                <span class="feature-label">Home, Work & Public Rates</span>
                                <span class="feature-desc">Use your actual electricity prices</span>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M12 6v6l4 2"/>
                                </svg>
                            </span>
                            <div class="feature-text">
                                <span class="feature-label">Cost Per Mile Breakdown</span>
                                <span class="feature-desc">Know your real running costs</span>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/>
                                </svg>
                            </span>
                            <div class="feature-text">
                                <span class="feature-label">vs Petrol & Diesel</span>
                                <span class="feature-desc">See your savings instantly</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Winter Mode -->
        <section class="section section-winter" id="winter">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Real Costs. Even in the Cold.</h2>
                    <p class="section-subtitle">Other calculators ignore winter. We don't.</p>
                </div>

                <div class="winter-showcase">
                    <p class="interactive-hint">Try adjusting the controls below to see efficiency reduction</p>
                    <!-- Exploded UI Controls -->
                    <div class="winter-controls">
                        <div class="winter-control winter-toggle">
                            <span class="control-label">Enable winter mode</span>
                            <div class="toggle-switch active">
                                <div class="toggle-knob"></div>
                            </div>
                        </div>

                        <div class="winter-control winter-heatpump">
                            <span class="control-label">Heat pump?</span>
                            <div class="segmented-control">
                                <button class="segment active">Yes</button>
                                <button class="segment">No</button>
                                <button class="segment">Not sure</button>
                            </div>
                        </div>

                        <div class="winter-control winter-severity">
                            <span class="control-label">Weather severity</span>
                            <div class="segmented-control severity-control">
                                <button class="segment">
                                    <span class="segment-title">Mild</span>
                                    <span class="segment-detail">0-5°C / 32-40°F</span>
                                </button>
                                <button class="segment active">
                                    <span class="segment-title">Typical</span>
                                    <span class="segment-detail">-7-0°C / 20-32°F</span>
                                </button>
                                <button class="segment">
                                    <span class="segment-title">Severe</span>
                                    <span class="segment-detail">&lt;-7°C / &lt;20°F</span>
                                </button>
                            </div>
                        </div>

                        <div class="winter-control winter-result">
                            <span class="control-label">Efficiency reduction</span>
                            <span class="reduction-value">25%</span>
                        </div>
                    </div>

                    <!-- Efficiency Table -->
                    <div class="efficiency-table">
                        <div class="table-header">
                            <span class="table-cell">Weather</span>
                            <span class="table-cell">Heat Pump</span>
                            <span class="table-cell">No Heat Pump</span>
                        </div>
                        <div class="table-row">
                            <span class="table-cell">
                                <strong>Mild</strong>
                                <span class="temp-range">0-5°C / 32-40°F</span>
                            </span>
                            <span class="table-cell value-hp">15%</span>
                            <span class="table-cell value-no-hp">25%</span>
                        </div>
                        <div class="table-row">
                            <span class="table-cell">
                                <strong>Typical</strong>
                                <span class="temp-range">-7-0°C / 20-32°F</span>
                            </span>
                            <span class="table-cell value-hp">25%</span>
                            <span class="table-cell value-no-hp">35%</span>
                        </div>
                        <div class="table-row">
                            <span class="table-cell">
                                <strong>Severe</strong>
                                <span class="temp-range">&lt;-7°C / &lt;20°F</span>
                            </span>
                            <span class="table-cell value-hp">35%</span>
                            <span class="table-cell value-no-hp">45%</span>
                        </div>
                    </div>

                    <p class="winter-citation">Based on research from DOE, AAA, and Recurrent Auto (30,000+ vehicles)</p>
                </div>
            </div>
        </section>

        <!-- Section 4: Compare Cars -->
        <section class="section section-compare" id="compare">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Head to Head</h2>
                    <p class="section-subtitle">Pick two. See which wins.</p>
                </div>

                <div class="compare-showcase">
                    <!-- Visual comparison element (compact) -->
                    <div class="compare-visual">
                        <div class="compare-car compare-car-left">
                            <svg viewBox="0 0 120 50" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M10 35h100M20 35v-8c0-4 2-8 6-10l20-7c4-1 20-2 35 0l15 5c4 2 6 6 6 12v8"/>
                                <circle cx="30" cy="35" r="8"/>
                                <circle cx="90" cy="35" r="8"/>
                                <circle cx="30" cy="35" r="4"/>
                                <circle cx="90" cy="35" r="4"/>
                                <path d="M45 15l3 10h20l2-10" opacity="0.5"/>
                            </svg>
                        </div>

                        <div class="compare-vs">
                            <div class="vs-line vs-line-top"></div>
                            <span class="vs-text">VS</span>
                            <div class="vs-line vs-line-bottom"></div>
                        </div>

                        <div class="compare-car compare-car-right">
                            <svg viewBox="0 0 120 50" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M10 35h100M100 35v-8c0-4-2-8-6-10l-20-7c-4-1-20-2-35 0l-15 5c-4 2-6 6-6 12v8"/>
                                <circle cx="30" cy="35" r="8"/>
                                <circle cx="90" cy="35" r="8"/>
                                <circle cx="30" cy="35" r="4"/>
                                <circle cx="90" cy="35" r="4"/>
                                <path d="M75 15l-3 10h-20l-2-10" opacity="0.5"/>
                            </svg>
                        </div>
                    </div>

                    <!-- Phone with real screenshot -->
                    <div class="compare-phone-wrapper">
                        <div class="device-iphone compare-phone">
                            <div class="iphone-notch"></div>
                            <div class="iphone-screen">
                                <img src="assets/compare.png" alt="EVKit vehicle comparison showing Battery & Range details with winner indicators" class="screen-screenshot">
                            </div>
                        </div>

                        <!-- PDF Export badge -->
                        <a href="assets/ev-comparison-sample.pdf" target="_blank" rel="noopener" class="pdf-badge">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                                <path d="M12 18v-6M9 15l3 3 3-3"/>
                            </svg>
                            <span>Export as PDF</span>
                            <span class="pdf-preview-hint">Preview</span>
                        </a>
                    </div>

                    <!-- Feature highlights -->
                    <div class="compare-highlights">
                        <div class="highlight-item">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            <span>Battery health estimates</span>
                        </div>
                        <div class="highlight-item">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            <span>Winter cost comparison</span>
                        </div>
                        <div class="highlight-item">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            <span>Share as professional PDF</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Battery Intelligence -->
        <section class="section section-battery" id="battery">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Battery Intelligence</h2>
                    <p class="section-subtitle">Year by year. Chemistry by chemistry.</p>
                </div>
                <div class="battery-showcase">
                    <div class="battery-tabs">
                        <div class="battery-tab active" data-chemistry="lfp" data-label="Lithium Iron Phosphate" data-rate="93% after 5 years" role="button" tabindex="0" aria-pressed="true">
                            <span class="battery-tab-name">LFP</span>
                            <span class="battery-tab-label">Lithium Iron Phosphate</span>
                            <span class="battery-tab-rate">93% after 5 years</span>
                        </div>
                        <div class="battery-tab" data-chemistry="lmf" data-label="Lithium Manganese Iron Phosphate" data-rate="90% after 5 years" role="button" tabindex="0" aria-pressed="false">
                            <span class="battery-tab-name">LMFP</span>
                            <span class="battery-tab-label">Lithium Manganese Iron Phosphate</span>
                            <span class="battery-tab-rate">90% after 5 years</span>
                        </div>
                        <div class="battery-tab" data-chemistry="nmc" data-label="Nickel Manganese Cobalt" data-rate="88% after 5 years" role="button" tabindex="0" aria-pressed="false">
                            <span class="battery-tab-name">NMC</span>
                            <span class="battery-tab-label">Nickel Manganese Cobalt</span>
                            <span class="battery-tab-rate">88% after 5 years</span>
                        </div>
                        <div class="battery-tab" data-chemistry="nca" data-label="Nickel Cobalt Aluminum" data-rate="83% after 5 years" role="button" tabindex="0" aria-pressed="false">
                            <span class="battery-tab-name">NCA</span>
                            <span class="battery-tab-label">Nickel Cobalt Aluminum</span>
                            <span class="battery-tab-rate">83% after 5 years</span>
                        </div>
                    </div>
                    <div class="battery-info-mobile">
                        <span class="battery-info-label">Lithium Iron Phosphate</span>
                        <span class="battery-info-rate">93% after 5 years</span>
                    </div>
                    <div class="device-iphone battery-phone">
                        <div class="iphone-notch"></div>
                        <div class="iphone-screen">
                            <img class="battery-screenshot" id="battery-screenshot"
                                 src="assets/battery/lfp.png"
                                 data-lfp="assets/battery/lfp.png"
                                 data-lmf="assets/battery/lmf.png"
                                 data-nmc="assets/battery/nmc.png"
                                 data-nca="assets/battery/nca.png"
                                 alt="Battery degradation settings for LFP chemistry">
                        </div>
                    </div>
                    <p class="battery-note">Set custom degradation rates per year. Based on <a href="https://www.geotab.com/blog/ev-battery-health/" target="_blank" rel="noopener noreferrer">Geotab EV Battery Health Study</a>.</p>
                </div>
            </div>
        </section>

        <!-- Section 4: Savings -->
        <!-- Section 5: Apple Watch + Widgets -->
        <section class="section section-watch" id="watch">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">On Your Wrist</h2>
                    <p class="section-subtitle">And your home screen.</p>
                </div>
                <div class="watch-showcase">
                    <div class="watch-features">
                        <div class="watch-feature">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 6v6l4 2"/>
                            </svg>
                            <span>Complications</span>
                        </div>
                        <div class="watch-feature">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="3" width="7" height="7" rx="1"/>
                                <rect x="14" y="3" width="7" height="7" rx="1"/>
                                <rect x="3" y="14" width="7" height="7" rx="1"/>
                                <rect x="14" y="14" width="7" height="7" rx="1"/>
                            </svg>
                            <span>Widgets</span>
                        </div>
                        <div class="watch-feature">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="5" y="2" width="14" height="20" rx="2"/>
                                <path d="M12 18h.01"/>
                            </svg>
                            <span>Standalone</span>
                        </div>
                    </div>
                    <div class="watch-devices">
                        <div class="device-watch watch-large">
                            <div class="watch-crown"></div>
                            <div class="watch-button"></div>
                            <div class="watch-screen">
                                <div class="screen-placeholder screen-placeholder-watch">
                                    <span class="placeholder-text-small">Journey Cost</span>
                                    <span class="placeholder-value">£4.20</span>
                                </div>
                            </div>
                        </div>
                        <div class="device-iphone watch-phone">
                            <div class="iphone-notch"></div>
                            <div class="iphone-screen">
                                <div class="screen-placeholder">
                                    <div class="widget-preview">
                                        <span class="widget-title">EVKit Widget</span>
                                        <span class="widget-value">£0.12/mi</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 6: CTA / Get Started -->
        <section class="section section-cta" id="get-started">
            <div class="container">
                <div class="cta-content">
                    <h2 class="cta-title">Join the Journey</h2>
                    <p class="cta-subtitle">Be first to know when EVKit launches.</p>
                    <button class="cta-button cta-button-large" id="registerButtonFooter">Get Early Access</button>
                    <div class="cta-trust">
                        <span class="trust-badge">No subscriptions</span>
                        <span class="trust-badge">No ads</span>
                        <span class="trust-badge">Works offline</span>
                        <span class="trust-badge">VoiceOver supported</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="footer-logo">EVKit</div>
                    <p class="footer-tagline">Your EV Cost Companion</p>
                </div>
                <nav class="footer-links">
                    <a href="privacy.html">Privacy</a>
                    <a href="terms.html">Terms</a>
                    <a href="mailto:hello@evkit.app?subject=EVKit:%20General%20Inquiry">Contact</a>
                </nav>
            </div>
            <p class="footer-copyright">&copy; 2026 Kukkdi Ltd. All rights reserved.</p>
        </div>
    </footer>

    <!-- Registration Modal -->
    <div id="registrationModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" aria-label="Close modal">&times;</button>
            <h2>Get Early Access to EVKit</h2>
            <p>Be the first to know when EVKit launches in March 2026.</p>
            <form id="registrationForm">
                <div class="form-group">
                    <label for="name">Name (Optional)</label>
                    <input type="text" id="name" name="name">
                </div>
                <div class="form-group">
                    <label class="radio-group-label">I'm interested in:</label>
                    <div class="radio-options">
                        <label class="radio-option">
                            <input type="radio" name="preference" value="beta" required>
                            <span class="radio-label">
                                <strong>Beta testing EVKit</strong>
                                <small>Get early access via TestFlight</small>
                            </span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="preference" value="notify" required>
                            <span class="radio-label">
                                <strong>Just notify me when it launches</strong>
                                <small>Be notified when the app is available</small>
                            </span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="preference" value="both" required>
                            <span class="radio-label">
                                <strong>Both - beta test AND notify at launch</strong>
                                <small>Get the full experience</small>
                            </span>
                        </label>
                    </div>
                </div>
                <button type="submit" class="submit-button">Submit</button>
                <p class="form-note">This will open your email app with details pre-filled — just hit send.</p>
            </form>
        </div>
    </div>

    <script>
        // Hamburger menu toggle
        const hamburger = document.querySelector('.nav-hamburger');
        const navLinks = document.querySelector('.nav-links');

        if (hamburger) {
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navLinks.classList.toggle('active');
                hamburger.setAttribute('aria-expanded',
                    hamburger.classList.contains('active'));
            });

            // Close menu when clicking a link
            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    hamburger.classList.remove('active');
                    navLinks.classList.remove('active');
                    hamburger.setAttribute('aria-expanded', 'false');
                });
            });
        }

        // Wait for GSAP to load
        window.addEventListener('load', function() {
            // Register ScrollTrigger plugin
            gsap.registerPlugin(ScrollTrigger);

            // Respect reduced motion preference
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

            if (!prefersReducedMotion) {
                initAnimations();
            }

            function initAnimations() {
                // All scroll-triggered sections: fade in once, stay visible
                const ta = "play none none none";

                // Section content reveals
                gsap.utils.toArray('.section:not(.section-hero)').forEach((section) => {
                    const header = section.querySelector('.section-header');
                    const showcase = section.querySelector('.section-header ~ div');

                    if (header) {
                        gsap.from(header, {
                            y: 40, opacity: 0, duration: 0.7,
                            scrollTrigger: { trigger: header, start: "top 85%", toggleActions: ta }
                        });
                    }
                    if (showcase) {
                        gsap.from(showcase, {
                            y: 40, opacity: 0, duration: 0.7, delay: 0.15,
                            scrollTrigger: { trigger: showcase, start: "top 85%", toggleActions: ta }
                        });
                    }
                });

                // Calculate: phone and features
                gsap.from('.calculate-tabs', {
                    y: 20, duration: 0.5,
                    scrollTrigger: { trigger: '.calculate-showcase', start: "top 85%", toggleActions: ta }
                });
                gsap.from('.calculate-phone', {
                    y: 50, duration: 0.7, delay: 0.1,
                    scrollTrigger: { trigger: '.calculate-showcase', start: "top 85%", toggleActions: ta }
                });
                gsap.from('.feature-item', {
                    x: 30, duration: 0.5, stagger: 0.15,
                    scrollTrigger: { trigger: '.calculate-features', start: "top 85%", toggleActions: ta }
                });

                // Calculate mode switcher
                document.querySelectorAll('.calculate-tab').forEach(tab => {
                    tab.addEventListener('click', function() {
                        const mode = this.dataset.mode;
                        const img = document.querySelector('.calculate-screenshot');

                        // Update active tab
                        document.querySelectorAll('.calculate-tab').forEach(t => t.classList.remove('active'));
                        this.classList.add('active');

                        // Switch screenshot
                        img.src = img.dataset[mode];
                    });
                });

                // Winter Mode: exploded UI assembly effect
                gsap.from('.winter-toggle', {
                    x: -80, y: -40, rotation: -5, duration: 0.8, ease: "back.out(1.2)",
                    scrollTrigger: { trigger: '.winter-controls', start: "top 80%", toggleActions: ta }
                });
                gsap.from('.winter-heatpump', {
                    x: 60, y: -30, rotation: 3, duration: 0.8, delay: 0.1, ease: "back.out(1.2)",
                    scrollTrigger: { trigger: '.winter-controls', start: "top 80%", toggleActions: ta }
                });
                gsap.from('.winter-severity', {
                    x: -50, y: 40, rotation: -3, duration: 0.8, delay: 0.2, ease: "back.out(1.2)",
                    scrollTrigger: { trigger: '.winter-controls', start: "top 80%", toggleActions: ta }
                });
                gsap.from('.winter-result', {
                    x: 70, y: 30, rotation: 5, duration: 0.8, delay: 0.3, ease: "back.out(1.2)",
                    scrollTrigger: { trigger: '.winter-controls', start: "top 80%", toggleActions: ta }
                });
                gsap.from('.efficiency-table', {
                    y: 40, duration: 0.6, delay: 0.5,
                    scrollTrigger: { trigger: '.efficiency-table', start: "top 85%", toggleActions: ta }
                });

                // Compare: visual cars slide in from sides
                gsap.from('.compare-car-left', {
                    x: -30, duration: 0.5,
                    scrollTrigger: { trigger: '.compare-visual', start: "top 85%", toggleActions: ta }
                });
                gsap.from('.compare-car-right', {
                    x: 30, duration: 0.5,
                    scrollTrigger: { trigger: '.compare-visual', start: "top 85%", toggleActions: ta }
                });
                gsap.from('.compare-vs', {
                    scale: 0.8, duration: 0.3, delay: 0.2,
                    scrollTrigger: { trigger: '.compare-visual', start: "top 85%", toggleActions: ta }
                });

                // Compare: phone and PDF badge
                gsap.from('.compare-phone', {
                    y: 40, duration: 0.6,
                    scrollTrigger: { trigger: '.compare-phone-wrapper', start: "top 85%", toggleActions: ta }
                });
                gsap.from('.pdf-badge', {
                    x: 30, duration: 0.5, delay: 0.3,
                    scrollTrigger: { trigger: '.compare-phone-wrapper', start: "top 85%", toggleActions: ta }
                });
                gsap.from('.highlight-item', {
                    y: 20, duration: 0.4, stagger: 0.1,
                    scrollTrigger: { trigger: '.compare-highlights', start: "top 90%", toggleActions: ta }
                });

                // Battery tabs
                gsap.from('.battery-tab', {
                    y: 20, duration: 0.5, stagger: 0.1,
                    scrollTrigger: { trigger: '.battery-tabs', start: "top 85%", toggleActions: ta }
                });

                // Winter Mode interactive controls
                const winterData = {
                    // [heatPump][severity] = percentage
                    'yes': { 'mild': 15, 'typical': 25, 'severe': 35 },
                    'no': { 'mild': 25, 'typical': 35, 'severe': 45 },
                    'notsure': { 'mild': 20, 'typical': 30, 'severe': 40 }
                };

                let winterState = {
                    enabled: true,
                    heatPump: 'yes',
                    severity: 'typical'
                };

                function updateWinterReduction() {
                    const value = winterState.enabled
                        ? winterData[winterState.heatPump][winterState.severity]
                        : 0;
                    document.querySelector('.reduction-value').textContent = value + '%';
                }

                // Toggle switch
                document.querySelector('.toggle-switch').addEventListener('click', function() {
                    this.classList.toggle('active');
                    winterState.enabled = this.classList.contains('active');
                    updateWinterReduction();
                });

                // Heat pump selector
                document.querySelectorAll('.winter-heatpump .segment').forEach((seg, idx) => {
                    seg.addEventListener('click', function() {
                        document.querySelectorAll('.winter-heatpump .segment').forEach(s => s.classList.remove('active'));
                        this.classList.add('active');
                        winterState.heatPump = ['yes', 'no', 'notsure'][idx];
                        updateWinterReduction();
                    });
                });

                // Weather severity selector
                document.querySelectorAll('.winter-severity .segment').forEach((seg, idx) => {
                    seg.addEventListener('click', function() {
                        document.querySelectorAll('.winter-severity .segment').forEach(s => s.classList.remove('active'));
                        this.classList.add('active');
                        winterState.severity = ['mild', 'typical', 'severe'][idx];
                        updateWinterReduction();
                    });
                });

                // Battery chemistry switcher
                function selectChemistry(chem) {
                    let activeTab = null;
                    document.querySelectorAll('.battery-tab').forEach(f => {
                        const isActive = f.dataset.chemistry === chem;
                        f.classList.toggle('active', isActive);
                        f.setAttribute('aria-pressed', isActive);
                        if (isActive) activeTab = f;
                    });

                    // Update mobile info display
                    const mobileInfo = document.querySelector('.battery-info-mobile');
                    if (mobileInfo && activeTab) {
                        mobileInfo.querySelector('.battery-info-label').textContent = activeTab.dataset.label;
                        mobileInfo.querySelector('.battery-info-rate').textContent = activeTab.dataset.rate;
                    }

                    const img = document.getElementById('battery-screenshot');
                    if (img) {
                        img.style.opacity = '0';
                        setTimeout(() => {
                            img.src = img.dataset[chem];
                            img.alt = 'Battery degradation settings for ' + chem.toUpperCase() + ' chemistry';
                            img.style.opacity = '1';
                        }, 200);
                    }
                }

                // Initialize with LFP
                selectChemistry('lfp');

                document.querySelectorAll('.battery-tab').forEach(card => {
                    card.addEventListener('click', () => selectChemistry(card.dataset.chemistry));
                    card.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            selectChemistry(card.dataset.chemistry);
                        }
                    });
                });

                // Savings counter
                const counter = document.querySelector('.savings-counter');
                if (counter) {
                    const target = parseInt(counter.dataset.target);
                    let counted = false;
                    ScrollTrigger.create({
                        trigger: '.savings-result',
                        start: "top 85%",
                        onEnter: () => {
                            if (counted) return;
                            counted = true;
                            let obj = { val: 0 };
                            gsap.to(obj, {
                                val: target, duration: 2, ease: "power2.out",
                                onUpdate: () => { counter.textContent = '£' + Math.round(obj.val).toLocaleString(); }
                            });
                        }
                    });
                }

                // Watch devices
                gsap.from('.watch-large', {
                    y: 40, opacity: 0, duration: 0.6,
                    scrollTrigger: { trigger: '.watch-devices', start: "top 85%", toggleActions: ta }
                });
                gsap.from('.watch-phone', {
                    y: 40, opacity: 0, duration: 0.6, delay: 0.15,
                    scrollTrigger: { trigger: '.watch-devices', start: "top 85%", toggleActions: ta }
                });

                // CTA
                gsap.from('.cta-content', {
                    y: 40, opacity: 0, duration: 0.7,
                    scrollTrigger: { trigger: '.section-cta', start: "top 80%", toggleActions: ta }
                });
            }
        });

        // Modal functionality
        const modal = document.getElementById('registrationModal');
        const registerBtn = document.getElementById('registerButton');
        const registerBtnFooter = document.getElementById('registerButtonFooter');
        const closeBtn = document.querySelector('.modal-close');
        const form = document.getElementById('registrationForm');
        let previouslyFocused = null;

        function trapFocus(event) {
            const focusableElements = modal.querySelectorAll('input, button, textarea, select, a[href]');
            const firstElement = focusableElements[0];
            const lastElement = focusableElements[focusableElements.length - 1];

            if (event.key === 'Tab') {
                if (event.shiftKey && document.activeElement === firstElement) {
                    event.preventDefault();
                    lastElement.focus();
                } else if (!event.shiftKey && document.activeElement === lastElement) {
                    event.preventDefault();
                    firstElement.focus();
                }
            }

            if (event.key === 'Escape') {
                closeModal();
            }
        }

        function openModal() {
            previouslyFocused = document.activeElement;
            modal.style.display = 'block';
            modal.addEventListener('keydown', trapFocus);
            document.body.style.overflow = 'hidden';

            setTimeout(() => {
                const firstInput = modal.querySelector('input, button');
                if (firstInput) firstInput.focus();
            }, 100);
        }

        function closeModal() {
            modal.style.display = 'none';
            modal.removeEventListener('keydown', trapFocus);
            document.body.style.overflow = '';

            if (previouslyFocused) {
                previouslyFocused.focus();
            }
        }

        registerBtn.onclick = openModal;
        registerBtnFooter.onclick = openModal;
        closeBtn.onclick = closeModal;

        window.onclick = function(event) {
            if (event.target == modal) {
                closeModal();
            }
        }

        form.onsubmit = function(event) {
            event.preventDefault();

            const name = document.getElementById('name').value.trim();
            const preference = document.querySelector('input[name="preference"]:checked').value;

            const preferenceText = {
                'beta': 'Interested in beta testing',
                'notify': 'Just notify me when the app goes live',
                'both': 'Both - beta test AND notify at launch'
            };

            const subject = 'EVKit: Notify me when EVKit is available';
            const body = `Name: ${name || 'Not provided'}%0D%0A%0D%0APreference: ${preferenceText[preference]}`;

            window.location.href = `mailto:hello@evkit.app?subject=${subject}&body=${body}`;

            setTimeout(() => {
                closeModal();
                form.reset();
            }, 500);
        }

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>
